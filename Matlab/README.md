# MC-AR - A software suite for comparative mocap analysis in an augmented reality environment (MATLAB-part)

## 0. Introduction
This MATLAB package is designed for the calculation and comparison of joint angles using 3D coordinate data obtained from the Qualisys Animation Marker Set, as recorded with Qualisys motion capture software. It also includes tools to analyze and compare violin bowing techniques. The package provides several functionalities:

- Calculation of joint angles based on ISB (International Society of Biomechanics) standards.
- Calculation of joint coordinate systems using recorded landmark coordinates.
- Analysis of bow position relative to the violin and angles between the bow and the violin and forearm.
- Comparison of bowing techniques between two players using three metrics: Procrustes distance, SPARC index difference, and bowing length per bow stroke difference.

## 1. MATLAB Version
This package is compatible with MATLAB version 2023a.

## 2. Package Setup and Usage
To use the package and run the provided scripts:

1. Open the `Master.m` script.
2. Run "Block 2: Demonstration of Analysis" for demonstration purposes.
3. If you need to regenerate the data array used in the R package, run "Block 3: Reconstruct dataset for analysis using R package." This will download the data from the Zenodo repository, batch analyze it, and save a data array for R package analysis.

## 3. Functions

The package includes the following functions:

- `ProcessMocapData`: This class analyzes motion capture data and produces a motion capture object that provides joint angles, original data, and functions for further analysis.
- `CalculateMetrics`: This function analyzes and compares two motion capture objects generated by `ProcessMocapData`. Currently, it uses bowing position for analysis, but other parameters can be used.
- `BatchCalculateMetrics`: This function batch analyzes all motion capture data in CSV format in a given dataset. It generates a data array for statistical analysis using the R package in this project.

## 4. Illustrations

1. **Figure 1**
![Figure 1](https://github.com/IPEM/MC-AR/blob/main/Matlab/Assets/Figure_1.jpg)
   Caption: From top to bottom: (1) Bowing use of the participant (red) and avatar (blue). Thicker lines represent analyzed sections; (2) Procrustes distance comparing analyzed sections between participant and avatar (PD); (3) Difference in SPARC index (dSI); (4) Difference in bowing length (dBL).

2. **Figure 2**
![Figure 2](https://github.com/IPEM/MC-AR/blob/main/Matlab/Assets/Figure_2.jpg)
   Caption: Joint angle data of the participant (red) and avatar (blue), including flexion/extension (FE) and adduction/abduction (AA) of the wrist, FE and pronation/supination (PS) of the elbow, elevation (E), and PS of the shoulder, and bowing position.

## 5. CodeOcean capsule:
The MATLAB/R codeocean capsule can be found at: https://codeocean.com/capsule/7664457/tree